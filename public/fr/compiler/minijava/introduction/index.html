<!DOCTYPE html>
<html lang="fr" class="js csstransforms3d">
  <head><script src="/MrCoder/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=MrCoder/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.138.0">
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Introduction :: MrCodeur</title>

    
    <link href="/MrCoder/css/nucleus.css?1768214134" rel="stylesheet">
    <link href="/MrCoder/css/fontawesome-all.min.css?1768214134" rel="stylesheet">
    <link href="/MrCoder/css/hybrid.css?1768214134" rel="stylesheet">
    <link href="/MrCoder/css/featherlight.min.css?1768214134" rel="stylesheet">
    <link href="/MrCoder/css/perfect-scrollbar.min.css?1768214134" rel="stylesheet">
    <link href="/MrCoder/css/auto-complete.css?1768214134" rel="stylesheet">
    <link href="/MrCoder/css/atom-one-dark-reasonable.css?1768214134" rel="stylesheet">
    <link href="/MrCoder/css/theme.css?1768214134" rel="stylesheet">
    <link href="/MrCoder/css/hugo-theme.css?1768214134" rel="stylesheet">
    
      <link href="/MrCoder/css/theme-green.css?1768214134" rel="stylesheet">
    

    <script src="/MrCoder/js/jquery-3.3.1.min.js?1768214134"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/MrCoder/fr/compiler/minijava/introduction/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/MrCoder/fr">
    <img src="/MrCoder/images/logo.png">
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Rechercher...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/MrCoder/js/lunr.min.js?1768214134"></script>
<script type="text/javascript" src="/MrCoder/js/auto-complete.js?1768214134"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/localhost:1313\/MrCoder\/\/fr";
    
</script>
<script type="text/javascript" src="/MrCoder/js/search.js?1768214134"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/MrCoder/fr/compiler/" title="Compilation" class="dd-item
        parent
        
        
        ">
      <a href="/MrCoder/fr/compiler/">
          Compilation
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/MrCoder/fr/compiler/minijava/" title="MiniJava" class="dd-item
        parent
        
        
        ">
      <a href="/MrCoder/fr/compiler/minijava/">
          MiniJava
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/MrCoder/fr/compiler/minijava/introduction/" title="Introduction" class="dd-item active">
        <a href="/MrCoder/fr/compiler/minijava/introduction/">
        Introduction
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/MrCoder/fr/compiler/minijava/scanner/" title="Analyse lexicale" class="dd-item ">
        <a href="/MrCoder/fr/compiler/minijava/scanner/">
        Analyse lexicale
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/MrCoder/fr/compiler/minijava/parser/" title="Analyse syntaxique" class="dd-item ">
        <a href="/MrCoder/fr/compiler/minijava/parser/">
        Analyse syntaxique
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>Contact</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/lascar-pacagi"><i class='fab fa-fw fa-github'></i>dépôt GitHub</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://protonmail.com/"><i class='far fa-fw fa-envelope'></i> lascar.pacagi@protonmail.com</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://discord.gg/UX5XS44"><i class='fab fa-fw fa-discord'></i> <font face='Mono'>MrC00der</font></a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="fr" value="http://localhost:1313/MrCoder/fr/compiler/minijava/introduction/" selected>Français</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="en" value="http://localhost:1313/MrCoder/en/compiler/minijava/introduction/">English</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
      </ul>
    </section>
    
    <section id="footer">
      <p><i class="fas fa-mug-hot fa-2x"></i></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a href='/MrCoder/fr/'>MrCodeur</a> > <a href='/MrCoder/fr/compiler/'>Compilation</a> > <a href='/MrCoder/fr/compiler/minijava/'>MiniJava</a> > Introduction
            
            
            
            
            
            
            
            
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#vue-densemble-du-transpileur">Vue d&rsquo;ensemble du transpileur</a>
      <ul>
        <li><a href="#analyse-lexicale">Analyse lexicale</a></li>
        <li><a href="#analyse-syntaxique">Analyse syntaxique</a></li>
        <li><a href="#typage">Typage</a></li>
        <li><a href="#génération-de-code">Génération de code</a></li>
      </ul>
    </li>
    <li><a href="#sémantique-de-minijava">Sémantique de MiniJava</a></li>
    <li><a href="#rappels-sur-la-liaison-dynamique-en-java">Rappels sur la liaison dynamique en Java</a></li>
    <li><a href="#questions">Questions</a></li>
    <li><a href="#ressources">Ressources</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
                
                Introduction
            </h1>
            

            
            


<p>Nous allons réaliser un transpileur, ou compilateur source à source, pour un sous-ensemble du langage <a href="https://fr.wikipedia.org/wiki/Java_(langage)">Java</a>, le langage
<a href="http://www.cambridge.org/resources/052182060X/">MiniJava</a>. La représentation d&rsquo;entrée pour notre compilateur sera donc le langage MiniJava. La représentation en sortie
de notre compilateur sera le langage <a href="https://fr.wikipedia.org/wiki/C_(langage)">C</a>.<br>
Une exemple de programme permettant de calculer une <a href="https://fr.wikipedia.org/wiki/Factorielle">factorielle</a>
est donné ci-dessous.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Factorial</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> a) {
</span></span><span style="display:flex;"><span>         System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#66d9ef">new</span> Fac().<span style="color:#a6e22e">computeFac</span>(10));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fac</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">computeFac</span>(<span style="color:#66d9ef">int</span> num) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> numAux;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (num <span style="color:#f92672">&lt;</span> 1) numAux <span style="color:#f92672">=</span> 1;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> numAux <span style="color:#f92672">=</span> num <span style="color:#f92672">*</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">computeFac</span>(num<span style="color:#f92672">-</span>1));
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> numAux;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>

<div class="notices tip" ><p>Comme Minijava est un sous-ensemble de Java, nous pourrons compiler nos fichiers MiniJava en utilisant le compilateur Java <code>javac</code> ce qui sera pratique pour tester la validité
de nos traductions en langage C. En effet, nous pourrons comparer la sortie du programme obtenu en utilisant le compilateur Java, avec la sortie obtenue par l&rsquo;exécutable obtenu
grâce à notre transpileur.</p>
</div>

<!-- Pour reprendre la description donnée par [Andrew W. Appel](https://www.cs.princeton.edu/~appel/) dans -->
<!-- une annexe de son livre [*Modern Compiler Implementation in Java*](https://www.cs.princeton.edu/~appel/modern/), on a : -->
<h2 id="vue-densemble-du-transpileur">Vue d&rsquo;ensemble du transpileur</h2>
<p>Nous allons considérer le programme MiniJava suivant pour illustrer cette section.
<a name="minijava_introduction_prog"></a>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Print42</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> a) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(35 <span style="color:#f92672">+</span> 2 <span style="color:#f92672">*</span> 3 <span style="color:#f92672">+</span> 1);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></p>
<p>La figure suivante montre les différentes étapes permettant de passer du fichier source en MiniJava au fichier source transpilé en C.</p>

<div class="mermaid" align="center">
graph LR;
A[source en MiniJava] -->|caractères| B(fa:fa-tools<br/> Analyse <br/> lexicale)
B -->|unités lexicales| C(fa:fa-tools <br/> Analyse <br/> syntaxique)
C -->|arbre syntaxique abstrait| D(fa:fa-tools <br/> Analyse <br/> de types)
D -->|arbre syntaxique abstrait| E(fa:fa-tools <br/> Générateur <br/> de code C)
E -->|caractères| F[source en C]
</div>

<p>Nous allons maintenant décrire les différentes étapes de la figure ci-dessus.<br>
Pour suivre les démos dans les différentes vidéos qui vont suivre, commencer par installer les dépendances comme indiqué <a href="https://github.com/lascar-pacagi/MiniJava/blob/master/README.md">ici</a>.
Télécharger ensuite le code en faisant</p>
<pre tabindex="0"><code class="language-git" data-lang="git">git clone --recurse-submodules https://github.com/lascar-pacagi/MiniJava.git
cd MiniJava
git checkout v1.0
make</code></pre>
<p>La branche <code>master</code> est la version avec le ramasse miettes et le tag <code>v1.0</code> est une version sans ramasse miettes.
Si vous voulez apporter des modifications à la version 1.0, vous
pouvez créer une nouvelle branche (<code>from_v1.0</code> par exemple) en faisant</p>
<pre tabindex="0"><code class="language-git" data-lang="git">git checkout -b from_v1.0 v1.0</code></pre>
<p>Le code que je vais utiliser pendant les démos se trouve ci-dessous.</p>

<section class="attachments ">
	<label>
		<i class="fas fa-paperclip" aria-hidden="true"></i>
		Pièces jointes
	</label>
	
		
	
	<div class="attachments-files">
	
		
		
			<li>
				<a href="/MrCoder/compiler/minijava/introduction.fr.files/demo_code.tgz" >
					demo_code.tgz
				</a>
				(3 ko)
			</li>
		
	
	<div>
	
</section>


<h3 id="analyse-lexicale">Analyse lexicale</h3>
<p>La première étape est l&rsquo;analyse lexicale qui va permettre de découper un flot de caractères en mots. Ces mots sont appelés unités lexicales. On obtient alors une information
plus structurée où les mots clés du langage, les identifiants, les entiers et les booléens ont été identifiés. Cette phase va aussi nous permettre de supprimer les commentaires et
les blancs (espaces et retours à la ligne).<br>
Pour le programme <a href="/MrCoder/fr/compiler/minijava/introduction/#minijava_introduction_prog">ci-dessus</a>, l&rsquo;analyse lexicale va produire le flot d&rsquo;unités lexicales suivantes. On peut voir, par exemple, que le mot clé <code>CLASS</code>
a été identifié, que la constante entière <code>INT_CONST 35</code> aussi.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>CLASS
</span></span><span style="display:flex;"><span>IDENT ‘Print42‘
</span></span><span style="display:flex;"><span>LBRACE
</span></span><span style="display:flex;"><span>PUBLIC
</span></span><span style="display:flex;"><span>STATIC
</span></span><span style="display:flex;"><span>VOID
</span></span><span style="display:flex;"><span>MAIN
</span></span><span style="display:flex;"><span>LPAREN
</span></span><span style="display:flex;"><span>STRING
</span></span><span style="display:flex;"><span>LBRACKET
</span></span><span style="display:flex;"><span>RBRACKET
</span></span><span style="display:flex;"><span>IDENT ‘a‘
</span></span><span style="display:flex;"><span>RPAREN
</span></span><span style="display:flex;"><span>LBRACE
</span></span><span style="display:flex;"><span>SYSO
</span></span><span style="display:flex;"><span>LPAREN
</span></span><span style="display:flex;"><span>INT_CONST ‘35‘
</span></span><span style="display:flex;"><span>PLUS
</span></span><span style="display:flex;"><span>INT_CONST ‘2‘
</span></span><span style="display:flex;"><span>TIMES
</span></span><span style="display:flex;"><span>INT_CONST ‘3‘
</span></span><span style="display:flex;"><span>PLUS
</span></span><span style="display:flex;"><span>INT_CONST ‘1‘
</span></span><span style="display:flex;"><span>RPAREN
</span></span><span style="display:flex;"><span>SEMICOLON
</span></span><span style="display:flex;"><span>RBRACE
</span></span><span style="display:flex;"><span>RBRACE
</span></span><span style="display:flex;"><span>EOF</span></span></code></pre></div>
<p>Dans la vidéo suivante, nous allons donner une vue d&rsquo;ensemble du transpileur, et nous présenterons l&rsquo;analyseur lexical de MiniJava.</p>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/DaSCO7JwpGU?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<h3 id="analyse-syntaxique">Analyse syntaxique</h3>
<p>La deuxième étape, l&rsquo;analyse syntaxique, prend en entrée le flot d&rsquo;unités lexicales et va construire un arbre syntaxique abstrait permettant de représenter la structure du
programme sous la forme d&rsquo;un arbre.<br>
Pour le programme <a href="/MrCoder/fr/compiler/minijava/introduction/#minijava_introduction_prog">ci-dessus</a>, on obtient l&rsquo;arbre suivant. On peut y voir, par exemple, l&rsquo;expression arithmétique avec de manière explicite la priorité
des opérateurs (plus c&rsquo;est bas dans l&rsquo;arbre et plus c&rsquo;est prioritaire).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>program
</span></span><span style="display:flex;"><span>  ├name Print42
</span></span><span style="display:flex;"><span>  ├main_args a
</span></span><span style="display:flex;"><span>  └main
</span></span><span style="display:flex;"><span>     └ISyso
</span></span><span style="display:flex;"><span>        └EBinOp OpAdd
</span></span><span style="display:flex;"><span>          ├EBinOp OpAdd
</span></span><span style="display:flex;"><span>          │  ├EConst <span style="color:#f92672">(</span>ConstInt 35<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>          │  └EBinOp OpMul
</span></span><span style="display:flex;"><span>          │    ├EConst <span style="color:#f92672">(</span>ConstInt 2<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>          │    └EConst <span style="color:#f92672">(</span>ConstInt 3<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>          └EConst <span style="color:#f92672">(</span>ConstInt 1<span style="color:#f92672">)</span></span></span></code></pre></div>
<p>L&rsquo;analyse syntaxique a besoin de connaître la structure d&rsquo;un programme MiniJava.
Cette structure est donnée sous la forme d&rsquo;une grammaire.
La grammaire de MiniJava, dans sa forme <a href="https://fr.wikipedia.org/wiki/Extended_Backus-Naur_Form">EBNF</a>
est donnée ci-dessous. Une version sûrement plus lisible pour nous en <a href="https://fr.wikipedia.org/wiki/Diagramme_syntaxique">diagramme syntaxique</a> est donnée
<a href="/MrCoder/fr/compiler/minijava/grammar.xhtml">ici</a>.^[La description de la grammaire qui permet de générer le diagramme ne suit pas strictement la forme EBNF. Les détails sont donnés <a href="https://www.w3.org/TR/xml/#sec-notation">ici</a>.]</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ebnf" data-lang="ebnf"><span style="display:flex;"><span><span style="color:#66d9ef">Program </span><span style="color:#f92672">=</span> <span style="color:#66d9ef">MainClass </span>{ <span style="color:#66d9ef">ClassDeclaration </span>} <span style="color:#e6db74">&#39;eof&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">MainClass </span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;class&#39;</span> <span style="color:#66d9ef">Identifier </span><span style="color:#e6db74">&#39;{&#39;</span> <span style="color:#e6db74">&#39;public&#39;</span> <span style="color:#e6db74">&#39;static&#39;</span> <span style="color:#e6db74">&#39;void&#39;</span> <span style="color:#e6db74">&#39;main&#39;</span> <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#e6db74">&#39;String&#39;</span> <span style="color:#e6db74">&#39;[&#39;</span> <span style="color:#e6db74">&#39;]&#39;</span> <span style="color:#66d9ef">Identifier </span><span style="color:#e6db74">&#39;)&#39;</span> <span style="color:#e6db74">&#39;{&#39;</span> <span style="color:#66d9ef">Statement </span><span style="color:#e6db74">&#39;}&#39;</span> <span style="color:#e6db74">&#39;}&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ClassDeclaration </span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;class&#39;</span> <span style="color:#66d9ef">Identifier </span>[ <span style="color:#e6db74">&#39;extends&#39;</span> <span style="color:#66d9ef">Identifier </span>] <span style="color:#e6db74">&#39;{&#39;</span> { <span style="color:#66d9ef">VarDeclaration </span>} { <span style="color:#66d9ef">MethodDeclaration </span>} <span style="color:#e6db74">&#39;}&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">VarDeclaration </span><span style="color:#f92672">=</span> <span style="color:#66d9ef">Type Identifier </span><span style="color:#e6db74">&#39;;&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">MethodDeclaration </span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;public&#39;</span> <span style="color:#66d9ef">Type Identifier </span><span style="color:#e6db74">&#39;(&#39;</span> [ <span style="color:#66d9ef">Type Identifier </span>{ <span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#66d9ef">Type Identifier </span>} ] <span style="color:#e6db74">&#39;)&#39;</span> <span style="color:#e6db74">&#39;{&#39;</span> { <span style="color:#66d9ef">VarDeclaration </span>} { <span style="color:#66d9ef">Statement </span>} <span style="color:#e6db74">&#39;return&#39;</span> <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;;&#39;</span> <span style="color:#e6db74">&#39;}&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Type </span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;int&#39;</span> <span style="color:#e6db74">&#39;[&#39;</span> <span style="color:#e6db74">&#39;]&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;boolean&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;int&#39;</span>
</span></span><span style="display:flex;"><span>        |  <span style="color:#66d9ef">Identifier </span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Statement </span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;{&#39;</span> { <span style="color:#66d9ef">Statement </span>} <span style="color:#e6db74">&#39;}&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;if&#39;</span> <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;)&#39;</span> <span style="color:#66d9ef">Statement </span><span style="color:#e6db74">&#39;else&#39;</span> <span style="color:#66d9ef">Statement</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;while&#39;</span> <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;)&#39;</span> <span style="color:#66d9ef">Statement</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;System.out.println&#39;</span> <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;)&#39;</span> <span style="color:#e6db74">&#39;;&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#66d9ef">Identifier </span><span style="color:#e6db74">&#39;=&#39;</span> <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;;&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#66d9ef">Identifier </span><span style="color:#e6db74">&#39;[&#39;</span> <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;]&#39;</span> <span style="color:#e6db74">&#39;=&#39;</span> <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;;&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Expression </span><span style="color:#f92672">=</span> <span style="color:#66d9ef">Expression </span>( <span style="color:#e6db74">&#39;&amp;&amp;&#39;</span> | <span style="color:#e6db74">&#39;&lt;&#39;</span> | <span style="color:#e6db74">&#39;+&#39;</span> | <span style="color:#e6db74">&#39;-&#39;</span> | <span style="color:#e6db74">&#39;*&#39;</span> ) <span style="color:#66d9ef">Expression</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;[&#39;</span> <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;]&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;.&#39;</span> <span style="color:#e6db74">&#39;length&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;.&#39;</span> <span style="color:#66d9ef">Identifier </span><span style="color:#e6db74">&#39;(&#39;</span> [<span style="color:#66d9ef">Expression </span>{<span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#66d9ef">Expression</span>}] <span style="color:#e6db74">&#39;)&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#66d9ef">Integer</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;true&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;false&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#66d9ef">Identifier</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;this&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;new&#39;</span> <span style="color:#e6db74">&#39;int&#39;</span> <span style="color:#e6db74">&#39;[&#39;</span> <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;]&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;new&#39;</span> <span style="color:#66d9ef">Identifier </span><span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#e6db74">&#39;)&#39;</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;!&#39;</span> <span style="color:#66d9ef">Expression</span>
</span></span><span style="display:flex;"><span>        | <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#66d9ef">Expression </span><span style="color:#e6db74">&#39;)&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Letter </span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;A&#39;</span> | <span style="color:#e6db74">&#39;B&#39;</span> | <span style="color:#e6db74">&#39;C&#39;</span> | <span style="color:#e6db74">&#39;D&#39;</span> | <span style="color:#e6db74">&#39;E&#39;</span> | <span style="color:#e6db74">&#39;F&#39;</span> | <span style="color:#e6db74">&#39;G&#39;</span>
</span></span><span style="display:flex;"><span>       | <span style="color:#e6db74">&#39;H&#39;</span> | <span style="color:#e6db74">&#39;I&#39;</span> | <span style="color:#e6db74">&#39;J&#39;</span> | <span style="color:#e6db74">&#39;K&#39;</span> | <span style="color:#e6db74">&#39;L&#39;</span> | <span style="color:#e6db74">&#39;M&#39;</span> | <span style="color:#e6db74">&#39;N&#39;</span>
</span></span><span style="display:flex;"><span>       | <span style="color:#e6db74">&#39;O&#39;</span> | <span style="color:#e6db74">&#39;P&#39;</span> | <span style="color:#e6db74">&#39;Q&#39;</span> | <span style="color:#e6db74">&#39;R&#39;</span> | <span style="color:#e6db74">&#39;S&#39;</span> | <span style="color:#e6db74">&#39;T&#39;</span> | <span style="color:#e6db74">&#39;U&#39;</span>
</span></span><span style="display:flex;"><span>       | <span style="color:#e6db74">&#39;V&#39;</span> | <span style="color:#e6db74">&#39;W&#39;</span> | <span style="color:#e6db74">&#39;X&#39;</span> | <span style="color:#e6db74">&#39;Y&#39;</span> | <span style="color:#e6db74">&#39;Z&#39;</span> | <span style="color:#e6db74">&#39;a&#39;</span> | <span style="color:#e6db74">&#39;b&#39;</span>
</span></span><span style="display:flex;"><span>       | <span style="color:#e6db74">&#39;c&#39;</span> | <span style="color:#e6db74">&#39;d&#39;</span> | <span style="color:#e6db74">&#39;e&#39;</span> | <span style="color:#e6db74">&#39;f&#39;</span> | <span style="color:#e6db74">&#39;g&#39;</span> | <span style="color:#e6db74">&#39;h&#39;</span> | <span style="color:#e6db74">&#39;i&#39;</span>
</span></span><span style="display:flex;"><span>       | <span style="color:#e6db74">&#39;j&#39;</span> | <span style="color:#e6db74">&#39;k&#39;</span> | <span style="color:#e6db74">&#39;l&#39;</span> | <span style="color:#e6db74">&#39;m&#39;</span> | <span style="color:#e6db74">&#39;n&#39;</span> | <span style="color:#e6db74">&#39;o&#39;</span> | <span style="color:#e6db74">&#39;p&#39;</span>
</span></span><span style="display:flex;"><span>       | <span style="color:#e6db74">&#39;q&#39;</span> | <span style="color:#e6db74">&#39;r&#39;</span> | <span style="color:#e6db74">&#39;s&#39;</span> | <span style="color:#e6db74">&#39;t&#39;</span> | <span style="color:#e6db74">&#39;u&#39;</span> | <span style="color:#e6db74">&#39;v&#39;</span> | <span style="color:#e6db74">&#39;w&#39;</span>
</span></span><span style="display:flex;"><span>       | <span style="color:#e6db74">&#39;x&#39;</span> | <span style="color:#e6db74">&#39;y&#39;</span> | <span style="color:#e6db74">&#39;z&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Digit </span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0&#39;</span> | <span style="color:#e6db74">&#39;1&#39;</span> | <span style="color:#e6db74">&#39;2&#39;</span> | <span style="color:#e6db74">&#39;3&#39;</span> | <span style="color:#e6db74">&#39;4&#39;</span> | <span style="color:#e6db74">&#39;5&#39;</span> | <span style="color:#e6db74">&#39;6&#39;</span> | <span style="color:#e6db74">&#39;7&#39;</span> | <span style="color:#e6db74">&#39;8&#39;</span> | <span style="color:#e6db74">&#39;9&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Integer </span><span style="color:#f92672">=</span> <span style="color:#66d9ef">Digit </span>{ <span style="color:#66d9ef">Digit </span>} ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Character </span><span style="color:#f92672">=</span> <span style="color:#66d9ef">Letter </span>| <span style="color:#66d9ef">Digit </span>| <span style="color:#e6db74">&#39;_&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Identifier </span><span style="color:#f92672">=</span> <span style="color:#66d9ef">Letter </span>{ <span style="color:#66d9ef">Letter </span>| <span style="color:#66d9ef">Digit </span>| <span style="color:#e6db74">&#39;_&#39;</span> } ;</span></span></code></pre></div>
<p>La vidéo suivante va présenter l&rsquo;analyseur syntaxique de MiniJava.</p>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/xUatwjMbjYk?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<h3 id="typage">Typage</h3>
<p>La troisième étape, l&rsquo;analyse de types, va prendre en entrée l&rsquo;arbre abstrait et va vérifier si le typage est correct. Par exemple, on va vérifier qu&rsquo;on utilise les méthodes
avec le bon nombre de paramètres, que les opérateurs <code>+</code> et <code>*</code> sont utilisés avec des opérandes entières, qu&rsquo;une classe est compatible avec une autre via la relation d&rsquo;héritage, &hellip;</p>
<p>La vidéo suivante va présenter une vue d&rsquo;ensemble du typage dans MiniJava.</p>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/mz0kVQd0rXY?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<h3 id="génération-de-code">Génération de code</h3>
<p>La dernière étape va consister à générer le code en C. On va de nouveau parcourir l&rsquo;arbre syntaxique abstrait pour générer ce code.
Pour notre <a href="/MrCoder/fr/compiler/minijava/introduction/#minijava_introduction_prog">example</a>, on obtient le fichier C ci-dessous.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>argv[]) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, ((<span style="color:#ae81ff">35</span> <span style="color:#f92672">+</span> (<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>)) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>));
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>La vidéo suivante va décrire succinctement la génération de code C dans MiniJava.</p>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/4wsr3Zr1vjs?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<h2 id="sémantique-de-minijava">Sémantique de MiniJava</h2>
<p>La sémantique de MiniJava est donnée par sa sémantique en tant que programme Java ^[Voir <a href="https://docs.oracle.com/javase/specs/">ici</a> pour la sémantique du langage Java.]. Les principales restrictions sont</p>
<ul>
<li>Les classes n&rsquo;héritent pas de la classe <code>Object</code>.</li>
<li>Le mot clé <code>super</code> n&rsquo;existe pas.</li>
<li>Il y a simplement un constructeur par défaut.</li>
<li>Les seuls types autorisés sont,</li>
<li><code>int</code>.</li>
<li><code>boolean</code>.</li>
<li><code>int[]</code>.</li>
<li>Les classes définies par l&rsquo;utilisateur.</li>
<li>La surcharge d&rsquo;opérateurs n&rsquo;est pas autorisée.</li>
<li>L&rsquo;instruction <code>System.out.printl()</code> ne peut imprimer que des entiers.</li>
<li>Toutes les méthodes doivent retourner une valeur.</li>
<li>Il n&rsquo;y a pas d&rsquo;interface, d&rsquo;exception, de généricité, de lambda.</li>
</ul>
<p>Nous expliquons dans la vidéo suivante les principales différences entre MiniJava et Java.</p>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/tNKBDxaML8c?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<p>Nous avons décrit rapidement l&rsquo;initialisation par défaut en Java (et MiniJava) dans la vidéo. Nous apportons quelques précisions ci-dessous.
Vous pouvez regarder <a href="https://docs.oracle.com/javase/specs/jls/se12/html/jls-4.html#jls-4.12.5">ici</a> pour tous les détails.</p>
<p>Soit le programme Java <code>Init.java</code> suivant.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Init</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>        <span style="color:#66d9ef">int</span> i;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>        <span style="color:#66d9ef">boolean</span> b;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(i <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> b <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> a);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span>}</span></span></code></pre></div>
<p>Si on le compile, on obtient les messages d&rsquo;erreur suivants.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ javac Init.java
</span></span><span style="display:flex;"><span>Init.java:6: error: variable i might not have been initialized
</span></span><span style="display:flex;"><span>        System.out.println<span style="color:#f92672">(</span>i + <span style="color:#e6db74">&#34; &#34;</span> + b + <span style="color:#e6db74">&#34; &#34;</span> + a<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>                           ^
</span></span><span style="display:flex;"><span>Init.java:6: error: variable b might not have been initialized
</span></span><span style="display:flex;"><span>        System.out.println<span style="color:#f92672">(</span>i + <span style="color:#e6db74">&#34; &#34;</span> + b + <span style="color:#e6db74">&#34; &#34;</span> + a<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>                                     ^
</span></span><span style="display:flex;"><span>Init.java:6: error: variable a might not have been initialized
</span></span><span style="display:flex;"><span>        System.out.println<span style="color:#f92672">(</span>i + <span style="color:#e6db74">&#34; &#34;</span> + b + <span style="color:#e6db74">&#34; &#34;</span> + a<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>                                               ^
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> errors</span></span></code></pre></div>
<p>En effet, les trois variables <code>i</code>, <code>b</code> et <code>a</code> sont situées sur la pile, et leurs valeurs
vont dépendre des valeurs qui sont situées sur la pile lors de l&rsquo;appel du <code>main</code>. Java n&rsquo;initialisant
pas les variables locales avec une valeur par défaut, le compilateur refuse le programme en nous indiquant
que l&rsquo;on cherche à utiliser des variables non initialisées.</p>
<p>Par contre, le programme suivant est correct car les attributs ont des valeurs par défaut.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Init</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>        <span style="color:#66d9ef">new</span> Default().<span style="color:#a6e22e">print</span>();
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Default</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> i;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> b;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> a;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print</span>() {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(i <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> b <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> a);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>}</span></span></code></pre></div>
<p>Et on obtient la sortie suivante.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ javac Init.java
</span></span><span style="display:flex;"><span>$ java Init
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span> false null</span></span></code></pre></div>
<h2 id="rappels-sur-la-liaison-dynamique-en-java">Rappels sur la liaison dynamique en Java</h2>
<p>Nous allons faire quelques rappels sur la liaison dynamique en Java dans la vidéo ci-dessous, car la gestion
de la liaison dynamique sera un des points difficiles à gérer dans notre transpileur.</p>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/zYWyqyrNSOs?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<h2 id="questions">Questions</h2>
<p>Reprenons la <a href="../grammar.xhtml">grammaire de MiniJava</a>.
Nous voudrions ajouter la possibilité d&rsquo;avoir</p>
<ul>
<li>L&rsquo;opérateur de comparaison <code>==</code>.</li>
<li>Des constructeurs.</li>
<li>Des constructeurs et méthodes <code>private</code>.</li>
</ul>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Quelles sont les modifications à apporter à cette grammaire pour incorporer ces nouveaux éléments ?
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p><a href="../grammar_private_constructor_equality.xhtml">Grammaire de MiniJava modifiée</a>.</p>

    </div>
</div>
<hr>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Dans la question précédente, quels terminaux avez-vous dû ajouter à la grammaire (un terminal dans la grammaire deviendra une unité lexicale) ?
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p><code>==</code> et <code>private</code>.</p>

    </div>
</div>
<hr>
<p>Soit le programme Java suivant.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">m1</span>(<span style="color:#66d9ef">int</span> n) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;int A:m1(int n)&#34;</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        <span style="color:#66d9ef">return</span> 0;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> A {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">m1</span>(<span style="color:#66d9ef">int</span> n) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;boolean B:m1(int n)&#34;</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>}</span></span></code></pre></div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Ce code compile-t-il ?
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p>Ce code ne compile pas. En effet, à la ligne 9, la méthode <code>m1</code> est une redéfinition de la
méthode <code>m1</code> de la ligne 2 : elle à le même nom et les mêmes paramètres. Par contre, pour être
une redéfinition correcte, il aurait fallu que le type de retour <code>boolean</code> soit compatible avec
le type de retour <code>int</code>, mais ce n&rsquo;est pas le cas.</p>

    </div>
</div>
<hr>
<p>Soit le programme Java suivant.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">m1</span>(<span style="color:#66d9ef">int</span> n) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;int A:m1(int n)&#34;</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        <span style="color:#66d9ef">return</span> 0;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">m1</span>(<span style="color:#66d9ef">int</span> n) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;boolean A:m1(int n)&#34;</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>}</span></span></code></pre></div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Ce code compile-t-il ?
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p>Ce code ne compile pas. En effet, le type de retour ne permet pas de différentier deux méthodes. Donc
même si les méthodes aux lignes 2 et 6 ont des types de retour différents, comme elles se nomment pareil et ont les
mêmes paramètres, on a pas une surcharge et il y a donc une erreur.</p>

    </div>
</div>
<hr>
<p>Soit le programme Java suivant.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">m1</span>(A a) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;int A:m1(A a)&#34;</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        <span style="color:#66d9ef">return</span> 0;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">m1</span>(B b) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;boolean A:m1(B b)&#34;</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>    }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span> <span style="color:#66d9ef">extends</span> A {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>}</span></span></code></pre></div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Ce code compile-t-il ?
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p>Ce code compile. Cette fois-ci, la méthode à la ligne 6 est bien une surcharge de la méthode
à la ligne 2 car le paramètre est d&rsquo;un type différent.</p>

    </div>
</div>
<h2 id="ressources">Ressources</h2>

<div class="notices info" ><p><a href="https://www.coursera.org/learn/initiation-programmation-java">Cours sur Java de Coursera partie 1</a><br>
<a href="https://www.coursera.org/learn/programmation-orientee-objet-java">Cours sur Java de Coursera partie 2</a><br>
<a href="https://www.coursera.org/learn/projet-programmation-java">Cours sur Java de Coursera partie 3</a><br>
<a href="https://introcs.cs.princeton.edu/java/home/">Cours sur Java de Princeton</a><br>
<a href="https://docs.oracle.com/javase/specs/">Spécifications du langage Java</a><br>
<a href="http://www.cambridge.org/resources/052182060X/">Page de MiniJava</a><br>
<a href="/fr/compiler/minijava/grammar.xhtml">Diagramme syntaxique de MiniJava</a><br>
<a href="https://www.edx.org/v2/course/c-programming-language-foundations">Cours sur le langage C partie 1</a><br>
<a href="https://www.edx.org/v2/course/modular-programming-and-memory-management">Cours sur le langage C partie 2</a><br>
<a href="https://www.edx.org/v2/course/programming-in-c-pointers-and-memory-management">Cours sur le langage C partie 3</a><br>
<a href="https://www.edx.org/v2/course/c-programming-advanced-data-types">Cours sur le langage C partie 4</a><br>
<a href="http://www.buildyourownlisp.com/">Apprendre le C en construisant un Lisp</a><br>
<a href="https://modernc.gforge.inria.fr/">Cours sur le C moderne</a><br>
<a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf">Spécifications du langage C (norme C11)</a></p>
</div>



<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/MrCoder/fr/compiler/minijava/" title="MiniJava"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/MrCoder/fr/compiler/minijava/scanner/" title="Analyse lexicale" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/MrCoder/js/clipboard.min.js?1768214134"></script>
    <script src="/MrCoder/js/perfect-scrollbar.min.js?1768214134"></script>
    <script src="/MrCoder/js/perfect-scrollbar.jquery.min.js?1768214134"></script>
    <script src="/MrCoder/js/jquery.sticky.js?1768214134"></script>
    <script src="/MrCoder/js/featherlight.min.js?1768214134"></script>
    <script src="/MrCoder/js/html5shiv-printshiv.min.js?1768214134"></script>
    <script src="/MrCoder/js/highlight.pack.js?1768214134"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/MrCoder/js/modernizr.custom-3.6.0.js?1768214134"></script>
    <script src="/MrCoder/js/learn.js?1768214134"></script>
    <script src="/MrCoder/js/hugo-learn.js?1768214134"></script>

    <link href="/MrCoder/mermaid/mermaid.css?1768214134" rel="stylesheet" />
    <script src="/MrCoder/mermaid/mermaid.js?1768214134"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

